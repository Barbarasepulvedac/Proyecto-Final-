#1. Carga de librerías
pacman::p_load(tidyverse, sjPlot, haven,
srvyr,
survey,
magrittr,
dyplr)
#2. Carga de base de datos Termómetro Social
TS4 <- read_dta("input/data/TS4.dta")
View(TS4)
datos_proc <- select(sexo, edad, tipo_vivienda = b2, est_animo = c2, trat_salud = c3, problemas = c10)
datos_proc <- TS4 %>%
select(sexo, edad, tipo_vivienda = b2, est_animo = c2, trat_salud = c3, problemas = c10)
datos_proc <- datos_proc %>%
mutate(edad = as_factor(car::recode(edad, c("18:39='Jovenes';40:59='Adulto'; 60:96='Adulto mayor'"), as.factor = T, levels = c("Jovenes", "Adulto", "Adulto mayor"))))
View(datos_proc)
View(TS4)
datos_proc <- datos_proc %>%
mutate(sexo = as_factor(sexo),
tipo_vivienda = as_factor(tipo_vivienda))
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(trat_salud = as_factor(trat_salud))
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(trat_salud = as.numeric(trat_salud))
View(datos_proc)
datos_proc <- TS4 %>%
select(sexo, edad, tipo_vivienda = b2, est_animo = c2, problemas = c10)
datos_proc <- TS4 %>%
select(sexo, edad, tipo_vivienda = b2, est_animo = c2, trat_salud = c3, problemas = c10)
datos_proc<- datos_proc %>%
mutate(trat_salud2 = if_else(trat_salud == "Sí", 1, 0))
#Tratamiento salud
datos_proc <- datos_proc %>%
mutate(trat_salud2 = case_when(trat_salud == 1 ~ "Sí",
FALSE ~ NA_character_))
View(datos_proc)
#Tratamiento salud
datos_proc <- datos_proc %>%
mutate(trat_salud2 = case_when(trat_salud == 1 ~ "Sí",
2 ~ "No",
FALSE ~ NA_character_))
#Tratamiento salud
datos_proc <- datos_proc %>%
mutate(trat_salud2 = case_when(trat_salud == 1 ~ "Sí",
2 ~ "No",
FALSE ~ NA_character_))
#Tratamiento salud
datos_proc <- datos_proc %>%
mutate(trat_salud2 = case_when(trat_salud == 1 ~ "Sí",
trat_salud == 2 ~ "No",
FALSE ~ NA_character_))
View(datos_proc)
#Tratamiento salud
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == "1", 1, 0)))
#Tratamiento salud
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == "1", 1, 0))
datos_proc <- datos_proc %>%
mutate(sexo = as_factor(sexo),
tipo_vivienda = as_factor(tipo_vivienda),
trat_salud = as_factor(trat_salud))
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == " Sí", 1, 0))
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == " Sí", 0, 1))
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == " Sí", 1, 0))
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == "Sí", 1, 0))
View(datos_proc)
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == "Sí", 1, 0))
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(trat_salud3 = if_else(trat_salud == "1. Sí", 1, 0))
View(datos_proc)
datos_proc <- TS4 %>%
select(sexo, edad, tipo_vivienda = b2, est_animo = c2, trat_salud = c3, problemas = c10)
datos_proc <- datos_proc %>%
mutate(edad = as_factor(car::recode(edad, c("18:39='Jovenes';40:59='Adulto'; 60:96='Adulto mayor'"), as.factor = T, levels = c("Jovenes", "Adulto", "Adulto mayor"))))
datos_proc <- datos_proc %>%
mutate(sexo = as_factor(sexo),
tipo_vivienda = as_factor(tipo_vivienda),
trat_salud = as_factor(trat_salud))
datos_proc <- datos_proc %>%
mutate(trat_salud2 = if_else(trat_salud == "1. Sí", 1, 0))
View(datos_proc)
datos_proc <- datos_proc %>%
mutate(problemas = as_factor(case_when(problemas == 1:2 ~ "Nunca",
problemas == 3 ~ "A veces",
problemas == 4:5 ~ "Siempre",
FALSE ~ NA_character_)))
datos_proc <- datos_proc %>%
mutate(problemas = as_factor(case_when(problemas == 1 ~ "Nunca",
problemas == 2 ~ "Nunca",
problemas == 3 ~ "A veces",
problemas == 4 ~ "Siempre",
problemas == 5 ~ "Siempre"
FALSE ~ NA_character_)))
datos_proc <- datos_proc %>%
mutate(problemas = as_factor(case_when(problemas == 1 ~ "Nunca",
problemas == 2 ~ "Nunca",
problemas == 3 ~ "A veces",
problemas == 4 ~ "Siempre",
problemas == 5 ~ "Siempre",
FALSE ~ NA_character_)))
View(datos_proc)
saveRDS(datos_proc, file = "output/data/datos_proc.rds")
View(TS4)
#1. Carga de librerías
pacman::p_load(tidyverse, sjPlot, haven,
srvyr,
survey,
magrittr,
dyplr)
#2. Carga de base de datos Termómetro Social
TS4 <- read_dta("input/data/TS4.dta")
datos_proc <- TS4 %>%
select(sexo, edad, tipo_vivienda = b2, est_animo = c2, trat_salud = c3, problemas = c10)
datos_proc <- datos_proc %>%
mutate(edad = as_factor(car::recode(edad, c("18:39='Jovenes';40:59='Adulto'; 60:96='Adulto mayor'"), as.factor = T, levels = c("Jovenes", "Adulto", "Adulto mayor"))))
datos_proc <- datos_proc %>%
mutate(sexo = as_factor(sexo),
tipo_vivienda = as_factor(tipo_vivienda),
trat_salud = as_factor(trat_salud))
datos_proc <- datos_proc %>%
mutate(trat_salud2 = if_else(trat_salud == "1. Sí", 1, 0))
datos_proc <- datos_proc %>%
mutate(problemas = as_factor(case_when(problemas == 1 ~ "Nunca",
problemas == 2 ~ "Nunca",
problemas == 3 ~ "A veces",
problemas == 4 ~ "Siempre",
problemas == 5 ~ "Siempre",
FALSE ~ NA_character_)))
#5. Guardamos el df procesado
saveRDS(datos_proc, file = "output/data/datos_proc.rds")
datos_proc <- datos_proc %>%
mutate_at(vars(edad, sexo, problemas, tipo_vivienda),
funs(forcats::as_factor(.)))
#5. Guardamos el df procesado
saveRDS(datos_proc, file = "output/data/datos_proc.rds")
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(tidyverse, sjPlot, haven,
srvyr,
magrittr,
dyplr)
load("output/data/datos_proc.rds")
#5. Guardamos el df procesado
saveRDS(datos_proc, file = "output/data/datos_proc.rds")
datos_proc <- readRDS("output/data/datos_proc.rds")
